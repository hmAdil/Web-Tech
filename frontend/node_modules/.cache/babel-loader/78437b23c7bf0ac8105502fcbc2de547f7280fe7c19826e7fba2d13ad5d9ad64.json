{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sem-3\\\\Web-Tech\\\\Mini-Project\\\\frontend\\\\src\\\\components\\\\Quiz.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport api from \"../api/api\";\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Quiz() {\n  _s();\n  const {\n    language\n  } = useParams();\n  const [questions, setQuestions] = useState([]);\n  const [qIndex, setQIndex] = useState(0);\n  const [score, setScore] = useState(0);\n  const [done, setDone] = useState(false);\n  const {\n    username\n  } = useContext(AuthContext);\n  useEffect(() => {\n    const fetchQuestions = async () => {\n      try {\n        const res = await api.get(`/lessons/${language}`);\n        const qs = res.data.filter(x => x.options && x.options.length).sort(() => Math.random() - 0.5);\n        setQuestions(qs);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchQuestions();\n  }, [language]);\n  const handleAnswer = choice => {\n    const q = questions[qIndex];\n    if (choice === q.answer) setScore(s => s + 1);\n    if (qIndex + 1 < questions.length) setQIndex(i => i + 1);else {\n      setDone(true);\n      const pct = Math.round((score + (choice === questions[qIndex].answer ? 1 : 0)) / questions.length * 100);\n      if (username) {\n        api.post(\"/lessons/progress\", {\n          username,\n          language,\n          score: pct\n        }).catch(e => console.error(e));\n      }\n    }\n  };\n  if (!questions.length) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"center\",\n    children: [\"No quiz questions available for \", language, \".\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 32\n  }, this);\n  if (done) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Quiz complete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Your score: \", score, \"/\", questions.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: `/lessons/${language}`,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Back to Lessons\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/dashboard\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n  const q = questions[qIndex];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"quiz\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [language, \" Quiz\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/dashboard\",\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"question-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Question \", qIndex + 1, \" of \", questions.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"What is the meaning of: \", /*#__PURE__*/_jsxDEV(\"em\", {\n          children: q.word\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 37\n        }, this), \" ?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"options\",\n        children: q.options.map(opt => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAnswer(opt),\n          children: opt\n        }, opt, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Quiz, \"Vr7vuShTIQoEY3yUBh+L/Km1/Ik=\", false, function () {\n  return [useParams];\n});\n_c = Quiz;\nvar _c;\n$RefreshReg$(_c, \"Quiz\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","Link","api","AuthContext","jsxDEV","_jsxDEV","Quiz","_s","language","questions","setQuestions","qIndex","setQIndex","score","setScore","done","setDone","username","fetchQuestions","res","get","qs","data","filter","x","options","length","sort","Math","random","err","console","error","handleAnswer","choice","q","answer","s","i","pct","round","post","catch","e","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","word","map","opt","onClick","_c","$RefreshReg$"],"sources":["D:/Sem-3/Web-Tech/Mini-Project/frontend/src/components/Quiz.js"],"sourcesContent":["import React,{useState,useEffect,useContext} from \"react\";\r\nimport {useParams,Link} from \"react-router-dom\";\r\nimport api from \"../api/api\";\r\nimport {AuthContext} from \"../contexts/AuthContext\";\r\n\r\nexport default function Quiz(){\r\n  const {language} = useParams();\r\n  const [questions,setQuestions] = useState([]);\r\n  const [qIndex,setQIndex] = useState(0);\r\n  const [score,setScore] = useState(0);\r\n  const [done,setDone] = useState(false);\r\n  const {username} = useContext(AuthContext);\r\n\r\n  useEffect(()=>{\r\n    const fetchQuestions = async ()=>{\r\n      try{\r\n        const res = await api.get(`/lessons/${language}`);\r\n        const qs = res.data.filter(x=>x.options && x.options.length).sort(()=>Math.random()-0.5);\r\n        setQuestions(qs);\r\n      }catch(err){\r\n        console.error(err);\r\n      }\r\n    };\r\n    fetchQuestions();\r\n  },[language]);\r\n\r\n  const handleAnswer = (choice)=>{\r\n    const q = questions[qIndex];\r\n    if(choice === q.answer) setScore(s=>s+1);\r\n    if(qIndex+1 < questions.length) setQIndex(i=>i+1);\r\n    else {\r\n      setDone(true);\r\n      const pct = Math.round(( (score + (choice===questions[qIndex].answer?1:0) ) / questions.length )*100);\r\n      if(username){\r\n        api.post(\"/lessons/progress\",{username,language,score:pct}).catch(e=>console.error(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  if(!questions.length) return <div className=\"center\">No quiz questions available for {language}.</div>;\r\n  if(done) return (\r\n    <div className=\"center\">\r\n      <h2>Quiz complete</h2>\r\n      <p>Your score: {score}/{questions.length}</p>\r\n      <Link to={`/lessons/${language}`}><button>Back to Lessons</button></Link>\r\n      <Link to=\"/dashboard\"><button>Dashboard</button></Link>\r\n    </div>\r\n  );\r\n\r\n  const q = questions[qIndex];\r\n\r\n  return (\r\n    <div className=\"quiz\">\r\n      <header>\r\n        <h2>{language} Quiz</h2>\r\n        <Link to=\"/dashboard\">Back</Link>\r\n      </header>\r\n\r\n      <div className=\"question-card\">\r\n        <p>Question {qIndex+1} of {questions.length}</p>\r\n        <h3>What is the meaning of: <em>{q.word}</em> ?</h3>\r\n        <div className=\"options\">\r\n          {q.options.map(opt=>(\r\n            <button key={opt} onClick={()=>handleAnswer(opt)}>{opt}</button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}